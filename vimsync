#!/bin/sh

cp_error()
{
	echo "Error copying config files, aborting"
	exit 1
}

syntax_error()
{
	print_help
	exit 1
}

print_help()
{
	printf "USAGE:
	\t./vimsync OPTION
	OPTIONS:
	\t-h       : show this help message
	\t-l       : sync with local files (you need to have cloned the repo for this to work)"
}

local_sync()
{
	cp -ir .bashrc .config .local "$HOME" &&
	cp_error
}

local_mode=false

while getopts lh option; do
	case $option in
		(l)
			local_mode=true;;
		(h | *)
			syntax_error;;
	esac
done

if $local_mode; then
	local_sync
fi

setxkbmap -layout us -variant dvp -option caps:swapescape

killall konsole && konsole &
kwinrc --replace &
